(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[26],{528:function(e,s,a){(window.__NEXT_P=window.__NEXT_P||[]).push(["/dashboard",function(){return a(4332)}])},7435:function(e,s,a){"use strict";a.d(s,{Z:function(){return d}});var l=a(5893),r=a(1163),n=a(1664),i=a.n(n),t=a(5837);function d(e){let{children:s}=e;(0,r.useRouter)();let{user:a,loading:n,signOut:d}=(0,t.a)();return n?(0,l.jsx)("div",{className:"flex justify-center items-center h-screen",children:"Loading..."}):(0,l.jsxs)("div",{className:"min-h-screen bg-gray-100",children:[(0,l.jsx)("nav",{className:"bg-blue-600 text-white shadow-md",children:(0,l.jsx)("div",{className:"max-w-7xl mx-auto px-4 sm:px-6 lg:px-8",children:(0,l.jsxs)("div",{className:"flex justify-between h-16",children:[(0,l.jsx)("div",{className:"flex items-center",children:(0,l.jsx)(i(),{href:"/dashboard",className:"text-xl font-bold",children:"Salary & Leave Manager"})}),(0,l.jsxs)("div",{className:"flex items-center space-x-4",children:[(0,l.jsx)(i(),{href:"/dashboard",className:"px-3 py-2 hover:bg-blue-700 rounded",children:"Dashboard"}),(0,l.jsx)(i(),{href:"/salary",className:"px-3 py-2 hover:bg-blue-700 rounded",children:"Salary"}),(0,l.jsx)(i(),{href:"/leave",className:"px-3 py-2 hover:bg-blue-700 rounded",children:"Annual Leave"}),(0,l.jsx)("span",{className:"px-3 py-2",children:null==a?void 0:a.email}),(0,l.jsx)("button",{onClick:d,className:"px-3 py-2 bg-red-600 hover:bg-red-700 rounded",children:"Sign Out"})]})]})})}),(0,l.jsx)("main",{className:"max-w-7xl mx-auto py-6 px-4 sm:px-6 lg:px-8",children:s})]})}},4332:function(e,s,a){"use strict";a.r(s),a.d(s,{default:function(){return x}});var l=a(5893),r=a(1163),n=a(5837),i=a(7294),t=e=>{let{children:s}=e,{user:a,loading:t}=(0,n.a)(),d=(0,r.useRouter)();return((0,i.useEffect)(()=>{t||a||d.push("/auth/login")},[a,t,d]),t)?(0,l.jsx)("div",{className:"flex justify-center items-center h-screen",children:(0,l.jsx)("div",{className:"animate-spin rounded-full h-12 w-12 border-t-2 border-b-2 border-blue-500"})}):(0,l.jsx)(l.Fragment,{children:a?s:null})},d=a(7435),c=a(8495),m=a(1664),o=a.n(m);function x(){let[e,s]=(0,i.useState)(null),[a,r]=(0,i.useState)(!0),[n,m]=(0,i.useState)(null),[x,h]=(0,i.useState)(null),[u,j]=(0,i.useState)(0);return((0,i.useEffect)(()=>{let e=async()=>{try{let{data:e}=await c.O.auth.getUser();if(!e.user)return;let{data:a,error:l}=await c.O.from("employees").select("*").eq("id",e.user.id).single();if(l)throw l;s(a);let{data:r,error:n}=await c.O.from("salaries").select("*").eq("employee_id",e.user.id).order("month",{ascending:!1}).limit(1).single();n||m(r);let i=a.years_of_service>=10?24.67:18.67;h(i);let t=new Date().getFullYear(),{data:d,error:o}=await c.O.from("leaves").select("days_taken").eq("employee_id",e.user.id).eq("year",t);if(!o&&d){let e=d.reduce((e,s)=>e+s.days_taken,0);j(e)}}catch(e){console.error("Error fetching data:",e)}finally{r(!1)}};e()},[]),a)?(0,l.jsx)(d.Z,{children:(0,l.jsx)("div",{className:"flex justify-center items-center h-64",children:"Loading..."})}):(0,l.jsx)(t,{children:(0,l.jsxs)(d.Z,{children:[(0,l.jsx)("h1",{className:"text-3xl font-bold mb-6",children:"Dashboard"}),e&&(0,l.jsxs)("div",{className:"bg-white shadow rounded-lg p-6 mb-6",children:[(0,l.jsx)("h2",{className:"text-xl font-semibold mb-4",children:"Employee Information"}),(0,l.jsxs)("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4",children:[(0,l.jsxs)("div",{children:[(0,l.jsx)("p",{className:"text-gray-600",children:"Name"}),(0,l.jsx)("p",{className:"font-medium",children:e.name})]}),(0,l.jsxs)("div",{children:[(0,l.jsx)("p",{className:"text-gray-600",children:"Employee ID"}),(0,l.jsx)("p",{className:"font-medium",children:e.employee_id})]}),(0,l.jsxs)("div",{children:[(0,l.jsx)("p",{className:"text-gray-600",children:"Position"}),(0,l.jsx)("p",{className:"font-medium",children:e.position})]}),(0,l.jsxs)("div",{children:[(0,l.jsx)("p",{className:"text-gray-600",children:"Years of Service"}),(0,l.jsx)("p",{className:"font-medium",children:e.years_of_service})]})]})]}),(0,l.jsxs)("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-6",children:[(0,l.jsxs)("div",{className:"bg-white shadow rounded-lg p-6",children:[(0,l.jsx)("h2",{className:"text-xl font-semibold mb-4",children:"Salary Information"}),n?(0,l.jsxs)("div",{children:[(0,l.jsxs)("div",{className:"mb-4",children:[(0,l.jsx)("p",{className:"text-gray-600",children:"Month"}),(0,l.jsx)("p",{className:"font-medium",children:new Date(n.month).toLocaleDateString("en-US",{month:"long",year:"numeric"})})]}),(0,l.jsxs)("div",{className:"mb-4",children:[(0,l.jsx)("p",{className:"text-gray-600",children:"Total Salary"}),(0,l.jsxs)("p",{className:"font-medium text-xl text-green-600",children:[n.total_salary.toLocaleString()," EGP"]})]}),(0,l.jsx)(o(),{href:"/salary",className:"inline-block mt-2 bg-blue-600 text-white px-4 py-2 rounded hover:bg-blue-700",children:"Manage Salary"})]}):(0,l.jsxs)("div",{children:[(0,l.jsx)("p",{className:"text-gray-600 mb-4",children:"No salary information available."}),(0,l.jsx)(o(),{href:"/salary",className:"inline-block bg-blue-600 text-white px-4 py-2 rounded hover:bg-blue-700",children:"Calculate Salary"})]})]}),(0,l.jsxs)("div",{className:"bg-white shadow rounded-lg p-6",children:[(0,l.jsx)("h2",{className:"text-xl font-semibold mb-4",children:"Annual Leave"}),null!==x&&(0,l.jsxs)("div",{children:[(0,l.jsxs)("div",{className:"mb-4",children:[(0,l.jsx)("p",{className:"text-gray-600",children:"Annual Leave Entitlement"}),(0,l.jsxs)("p",{className:"font-medium",children:[x," days"]})]}),(0,l.jsxs)("div",{className:"mb-4",children:[(0,l.jsx)("p",{className:"text-gray-600",children:"Leave Taken This Year"}),(0,l.jsxs)("p",{className:"font-medium",children:[u," days"]})]}),(0,l.jsxs)("div",{className:"mb-4",children:[(0,l.jsx)("p",{className:"text-gray-600",children:"Remaining Leave"}),(0,l.jsxs)("p",{className:"font-medium text-xl text-blue-600",children:[(x-u).toFixed(2)," days"]})]}),(0,l.jsx)(o(),{href:"/leave",className:"inline-block mt-2 bg-blue-600 text-white px-4 py-2 rounded hover:bg-blue-700",children:"Manage Leave"})]})]})]})]})})}}},function(e){e.O(0,[664,774,888,179],function(){return e(e.s=528)}),_N_E=e.O()}]);